/* Book Print — clean Cambria, crisp mono, short TOC (no bullets).
   Based on print-friendly, with a styled title + TOC and a page-break after TOC. */

:root{
  --text:#000;
  --muted:#333;
  --rule:#bbb;
  --lh:1.38;
  --p-bottom:0.58rem;
  --h1-top:.25rem; --h1-bottom:.48rem;
  --h2-top:.9rem;  --h2-bottom:.48rem;
  --h3-top:.72rem; --h3-bottom:.36rem;
  --mono: Consolas, "Cascadia Mono", "DejaVu Sans Mono", "Courier New", monospace;
  --serif: Cambria, Georgia, "Times New Roman", serif;
}

html, body { height:100%; }
body{
  color:var(--text);
  font: 11pt/var(--lh) var(--serif);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  hyphens: auto;
}

/* Common headings */
h1, h2, h3, h4{
  font-family: var(--serif);
  color:#111;
  font-weight:700;
  line-height:1.22;
  border-bottom:.5pt solid var(--rule);
  padding-bottom:.12rem;
  page-break-after: avoid;
}
h1{ font-size:22pt; margin:var(--h1-top) 0 var(--h1-bottom); }
h2{ font-size:18pt; margin:var(--h2-top) 0 var(--h2-bottom); }
h3{ font-size:14pt; margin:var(--h3-top) 0 var(--h3-bottom); }
h1{ page-break-before: always; } 
h1:first-of-type{ page-break-before: avoid; margin-top:0 }

p{ margin:0 0 var(--p-bottom); }
a, a:visited{ color:#000; text-decoration: underline; }

/* Title (not a heading → won’t enter TOC) */
.book-title{
  text-align:center;
  font: 22pt/1.25 var(--serif);
  font-weight:700;
  margin: 18mm 0 6mm;
  border-bottom:.5pt solid var(--rule);
  padding-bottom:4mm;
}

/* Hide Pandoc's date if it ever appears */
.date{ display:none !important; }

/* --- TOC styling ---------------------------------------------------------- */
/* Pandoc’s HTML TOC root is #TOC (div or nav). */
#TOC { 
  margin: 6mm 0 8mm;
  page-break-after: always;   /* start content on a fresh page */
}

/* Title of the TOC: replace with "Contents" */
#TOC > h2, nav#TOC > h2 { visibility: hidden; position: relative; height: 0; margin: 0; }
#TOC > h2::after, nav#TOC > h2::after {
  content: "Contents";
  visibility: visible;
  position: relative;
  display: block;
  color:#111;
  font: 18pt/1.22 var(--serif);
  font-weight:700;
  border-bottom:.5pt solid var(--rule);
  padding-bottom:.12rem;
  margin: 0 0 .48rem;
}

/* TOC list: no bullets, neat indent */
#TOC ul { list-style: none; padding-left: 0; margin: 0; }
#TOC ul ul { margin-left: 6mm; }                 /* sections under chapters */
#TOC li { margin: 2mm 0; }

#TOC > ul > li > a {                             /* chapters */
  font: 12pt/1.3 var(--serif);
  font-weight: 700;
  text-decoration: none;
}
#TOC ul ul > li > a {                            /* sections */
  font: 10.5pt/1.35 var(--serif);
  font-weight: 400;
  text-decoration: none;
}

/* --- Code/Pre ------------------------------------------------------------- */
pre, code{
  font-family: var(--mono);
  font-size: 9.8pt;
}
pre{
  background:#fff;                 /* ink-light for printers */
  border:.5pt solid var(--rule);
  padding:8px 10px;
  margin:.58rem 0 .9rem;
  overflow:auto;
  page-break-inside: avoid;
  border-radius:2px;
}
div.sourceCode{ margin:.58rem 0 .9rem; }

/* --- Tables --------------------------------------------------------------- */
table{
  width:100%;
  border-collapse:collapse;
  margin:.5rem 0 .95rem;
}
th,td{
  border:.5pt solid var(--rule);
  padding:5px 7px;
  vertical-align:top;
}
th{ font-weight:700; }

/* --- Blockquotes ---------------------------------------------------------- */
blockquote{
  margin:.6rem .9rem;
  padding:.2rem .7rem;
  border-left:2.5pt solid #aaa;
  color:#222;
  background:#fff;
}

/* Media & page-break hints */
img,svg,figure{ max-width:100%; }
figure{ margin:.6rem 0 .9rem; page-break-inside: avoid; }
table, pre, blockquote, figure { page-break-inside: avoid; }
